<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Notification Demo</title>
</head>

<body>
  <button id="btn">Click Me</button>

  <script>
    var btn = document.querySelector('#btn');

    btn.addEventListener('click', function () {
      Notification.requestPermission().then(function (r) {
        if (r === "granted") {
          sendNotification('Welcome to Portal', 'Your notification has been activated!');
        }
      });
    });

    function sendNotification(head, body) {
      new Notification(head, {
        body: body,
        icon: "https://github.com/marutiflex/Home/blob/main/Saraf%20Logo.png?raw=true",
      });

      // Vibration
      if (navigator.vibrate) {
        navigator.vibrate([200, 100, 200]);
      }
    }

    let notification;

    document.addEventListener('visibilitychange', function () {
      if (document.visibilityState === "hidden") {
        notification = new Notification('Getback', {
          body: 'You have not completed Yet All the Task, Please get back Soon!',
          icon: "https://github.com/marutiflex/Home/blob/main/Saraf%20Logo.png?raw=true",
        });

        if (navigator.vibrate) {
          navigator.vibrate([200, 100, 200]);
        }
      } else if (notification) {
        notification.close();
      }
    });
  </script>
</body>

</html>
